namespace SpriteKind {
    export const EnemyCar = SpriteKind.create()
    export const Striple = SpriteKind.create()
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.EnemyCar, function (sprite, otherSprite) {
    otherSprite.destroy(effects.fire, 200)
    info.changeLifeBy(-1)
})
sprites.onDestroyed(SpriteKind.EnemyCar, function (sprite) {
    info.changeScoreBy(1)
})
sprites.onOverlap(SpriteKind.EnemyCar, SpriteKind.EnemyCar, function (sprite, otherSprite) {
    sprite.destroy(effects.fire, 200)
    otherSprite.destroy(effects.fire, 200)
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    gameOn = false
    controller.moveSprite(mySprite, 0, 0)
    mySprite.startEffect(effects.fire)
    for (let value of sprites.allOfKind(SpriteKind.Enemy)) {
        value.setVelocity(0, 0)
    }
    for (let value of sprites.allOfKind(SpriteKind.EnemyCar)) {
        value.setVelocity(0, 0)
    }
    for (let value of sprites.allOfKind(SpriteKind.Striple)) {
        value.setVelocity(0, 0)
    }
})
let mySprite3: Sprite = null
let mySprite2: Sprite = null
let mySprite4: Sprite = null
let mySprite: Sprite = null
let gameOn = false
info.setLife(8)
let Trees = [img`
    . . . . . . . . . . . . . . . . 
    . . . . . . c c c c 6 . . . . . 
    . . . . c c 6 7 7 5 5 6 6 . . . 
    . . c c 6 6 6 6 7 5 5 7 c c . . 
    . c 6 6 6 7 7 7 7 7 7 5 6 c c . 
    . c 6 6 7 7 7 5 7 6 7 7 7 6 c c 
    c 6 6 7 7 6 7 7 7 6 7 7 6 6 6 c 
    c c 6 6 6 7 6 7 6 6 6 6 5 7 6 c 
    c c c c 6 7 7 6 7 7 7 6 7 6 6 c 
    . c c 6 6 6 6 c 6 6 6 6 6 c c c 
    . c c 6 6 c 6 6 c 6 c 6 6 c c . 
    . . c c f f 6 6 c f f c c f . . 
    . . . . c f c c c f c f f . . . 
    . . . . . 4 f f f c . e . . . . 
    . . . . . . e e e . . 4 . . . . 
    . . . . . . . e e . e . . . . . 
    `, img`
    . . . . . . 6 6 6 6 . . . . . . 
    . . . . . c 6 7 7 6 c . . . . . 
    . . . . c 6 7 5 7 7 6 c . . . . 
    . . 6 6 c c 6 5 5 6 c c 6 6 . . 
    6 6 6 5 5 5 6 7 5 6 5 5 7 6 6 6 
    6 6 7 7 7 5 7 6 7 5 5 7 7 7 7 6 
    . c c c 6 6 7 6 6 5 7 6 c c 6 . 
    6 c 6 6 6 6 6 c c 6 6 6 6 6 c 6 
    6 6 7 7 7 c c c c c c 7 7 7 6 6 
    6 7 7 7 6 6 c c c c 6 6 7 7 7 6 
    c 6 c c 6 7 6 c c 6 7 6 c c 6 c 
    . c c 5 5 7 6 7 7 6 7 5 5 c c . 
    . c 6 7 5 5 6 7 7 6 5 5 7 6 c . 
    . 6 6 7 7 6 6 5 5 6 6 7 7 6 6 . 
    . . 6 6 6 6 c 6 7 6 c 6 6 6 . . 
    . . . 6 6 c . 6 6 6 . c 6 . . . 
    `, img`
    . . . . . . . c c . . . . . . . 
    . . . . c c c 6 5 c 6 6 . . . . 
    . . . . c 6 c 5 5 c 7 6 . . . . 
    . . . 6 c c 7 5 5 7 c 6 6 . . . 
    . . c c 7 7 7 7 7 5 7 7 c 6 . . 
    . 6 6 6 c 6 7 7 7 7 6 c c 6 6 . 
    c 7 7 7 6 c 7 c 6 7 6 7 7 7 7 6 
    c c c 6 6 6 c 6 6 6 6 7 7 6 6 6 
    . c c 7 6 6 6 6 6 7 7 7 7 c 6 . 
    . c 7 7 6 6 7 6 6 7 7 6 7 7 c . 
    . c c c c 7 7 6 f 7 7 c c c c . 
    . . . . c 7 c f f c 7 c . . . . 
    . . . . . 6 f e e e c . . . . . 
    . . . . . e e e e e e . . . . . 
    . . . . e e . e e . e e . . . . 
    . . . . . . . e e . . . . . . . 
    `]
let striLine = false
gameOn = true
mySprite = sprites.create(img`
    . . . . . . e e c c e e . . . . 
    . . . . . e 2 2 2 2 2 2 e . . . 
    . . . . 2 c 2 2 2 2 2 2 c 2 . . 
    . . . e 2 c 4 2 2 2 2 2 c 2 e . 
    . . . f 2 2 4 2 2 2 2 2 c 2 f . 
    . . . f 2 2 4 2 2 2 2 2 2 2 f . 
    . . . f 2 2 4 2 2 2 2 2 2 2 f . 
    . . . f 2 c 2 4 4 2 2 2 c 2 f . 
    . . . e 2 c e c c c c e c 2 e . 
    . . . e 2 e c b b b b c e 2 e . 
    . . . e 2 e b b b b b b e 2 e . 
    . . . e e e e e e e e e e e e . 
    . . . f e d e e e e e e d e f . 
    . . . f e 2 d e e e e d 2 e f . 
    . . . f f e e e e e e e e f f . 
    . . . . f f . . . . . . f f . . 
    `, SpriteKind.Player)
controller.moveSprite(mySprite, 50, 20)
mySprite.setStayInScreen(true)
scene.setBackgroundImage(img`
    777777777777777777777777..................................................................................................................7777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    777777777777777777777777.................................................................................................................77777777777777777777777
    `)
game.onUpdateInterval(500, function () {
    if (gameOn) {
        if (striLine) {
            mySprite4 = sprites.create(img`
                1 1 
                1 1 
                1 1 
                1 1 
                1 1 
                1 1 
                1 1 
                1 1 
                1 1 
                1 1 
                1 1 
                1 1 
                1 1 
                1 1 
                1 1 
                1 1 
                1 1 
                1 1 
                1 1 
                1 1 
                `, SpriteKind.Striple)
            mySprite4.setPosition(80, -15)
            mySprite4.vy = 40
            mySprite4.z = -1
        }
        striLine = !(striLine)
        if (Math.percentChance(50)) {
            mySprite2 = sprites.create(Trees[randint(0, Trees.length - 1)], SpriteKind.Enemy)
            mySprite2.setFlag(SpriteFlag.AutoDestroy, true)
            mySprite2.setVelocity(0, 40)
            mySprite2.setPosition(randint(0, 20), 0)
        }
        if (Math.percentChance(50)) {
            mySprite2 = sprites.create(Trees[randint(0, Trees.length - 1)], SpriteKind.Enemy)
            mySprite2.setFlag(SpriteFlag.AutoDestroy, true)
            mySprite2.setVelocity(0, 40)
            mySprite2.setPosition(randint(140, 160), 0)
        }
        if (Math.percentChance(15)) {
            mySprite3 = sprites.create(img`
                . . . . . . a a c c a a . . . . 
                . . . . . a 3 3 3 3 3 3 a . . . 
                . . . . 3 c 3 3 3 3 3 3 c 3 . . 
                . . . a 3 c d 3 3 3 3 3 c 3 a . 
                . . . f 3 3 d 3 3 3 3 3 c 3 f . 
                . . . f 3 3 d 3 3 3 3 3 3 3 f . 
                . . . f 3 3 d 3 3 3 3 3 3 3 f . 
                . . . f 3 c 3 d d 3 3 3 c 3 f . 
                . . . a 3 c a c c c c a c 3 a . 
                . . . a 3 a c b b b b c a 3 a . 
                . . . a 3 a b b b b b b a 3 a . 
                . . . a a a a a a a a a a a a . 
                . . . f a d a a a a a a d a f . 
                . . . f a 3 d a a a a d 3 a f . 
                . . . f f a a a a a a a a f f . 
                . . . . f f . . . . . . f f . . 
                `, SpriteKind.EnemyCar)
            mySprite3.setFlag(SpriteFlag.AutoDestroy, true)
            mySprite3.setVelocity(0, randint(5, 50))
            mySprite3.setPosition(randint(30, 130), 0)
        }
    } else {
        info.changeLifeBy(-1)
    }
})
